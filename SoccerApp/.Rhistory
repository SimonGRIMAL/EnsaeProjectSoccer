shiny::runApp('C:/Users/admin/Desktop/Certificat Datascientist/PROJET/EnsaeProjectSoccer/SoccerApp')
install.packages(plotly)
install.packages("plotly")
runApp('C:/Users/admin/Desktop/Certificat Datascientist/PROJET/EnsaeProjectSoccer/SoccerApp')
install.packages("shinycssloaders")
runApp('C:/Users/admin/Desktop/Certificat Datascientist/PROJET/EnsaeProjectSoccer/SoccerApp')
runApp('C:/Users/admin/Desktop/Certificat Datascientist/PROJET/EnsaeProjectSoccer/SoccerApp')
runApp('C:/Users/admin/Desktop/Certificat Datascientist/PROJET/EnsaeProjectSoccer/SoccerApp')
shiny::runApp('C:/Users/admin/Desktop/Certificat Datascientist/Module2_J3/Dataviz/shiny/Nadira/tp1 suite')
shiny::runApp('C:/Users/admin/Desktop/Certificat Datascientist/PROJET/EnsaeProjectSoccer/SoccerApp')
setwd("C:/Users/admin/Desktop/Certificat Datascientist/PROJET/EnsaeProjectSoccer/SoccerApp")
runApp()
library(dplyr)
library(reshape2)
library(reshape)
library(ggplot2)
library(RSQLite)
setwd("C:/Users/admin/Desktop/Certificat Datascientist/PROJET/EnsaeProjectSoccer")
drv <- SQLite()
db <- dbConnect(drv, dbname="database.sqlite")
dbListTables(db)
setwd("C:/Users/admin/Desktop/Certificat Datascientist/PROJET/EnsaeProjectSoccer/SoccerApp")
country <- dbGetQuery( db,'select * from Country' )
league <- dbGetQuery( db,'select * from League' )
match <- dbGetQuery( db,'select * from Match' )
player <- dbGetQuery( db,'select * from Player' )
player_attributes <- dbGetQuery( db,'select * from Player_Attributes' )
team <- dbGetQuery( db,'select * from Team' )
team_attributes <- dbGetQuery( db,'select * from Team_Attributes' )
sqlite_sequence<- dbGetQuery( db,'select * from sqlite_sequence' )
Match <- dbGetQuery( db,'select * from Match' )
Match_viz=filter(Match, season=="2015/2016" & league_id != 15722)
list_home_team_viz<-as.data.frame(unique(Match_viz$home_team_api_id))
colnames(list_home_team_viz) <- "home_team_api_id"
nb_match_team_season<- Match %>% group_by(home_team_api_id,season) %>% count()
Team_home_viz<-cast(nb_match_team_season,home_team_api_id~season,fill=0)
colnames(Team_home_viz)[2:9]<-paste("nb_match", colnames(Team_home_viz[2:9]), sep = "_")
Match$goal_diff <- Match$home_team_goal-Match$away_team_goal
Match$goal_diff_class <- cut(Match$goal_diff, breaks=c(min(Match$goal_diff),-1e-10,+1e-10,max(Match$goal_diff)))
levels(Match$goal_diff_class) <- c("home_loss","draw","home_win")
nb_match_team_season_2<- Match %>% group_by(home_team_api_id,season,goal_diff_class) %>% count()
Team_home_viz_2<-cast(nb_match_team_season_2,home_team_api_id~season+goal_diff_class,fill=0)
#colnames(Team_home_viz_2)
#table(Team_home_viz_2$'2015/2016_NA')
colnames(Team_home_viz_2)[2:26]<-paste("nb_match", colnames(Team_home_viz_2[2:26]), sep = "_")
## nb de buts marqués et encaissés
nb_match_team_season_3<- Match %>% group_by(home_team_api_id,season) %>% summarize(goal_scored=sum(home_team_goal), goal_conceded=sum(away_team_goal))
Team_home_viz_31<-cast(nb_match_team_season_3,home_team_api_id~season,value="goal_scored",fill=0)
colnames(Team_home_viz_31)[2:9]<-paste("nb_goal_scored", colnames(Team_home_viz_31[2:9]), sep = "_")
Team_home_viz_32<-cast(nb_match_team_season_3,home_team_api_id~season,value="goal_conceded",fill=0)
colnames(Team_home_viz_32)[2:9]<-paste("nb_goal_conceded", colnames(Team_home_viz_32[2:9]), sep = "_")
#jointures avec join de dplyr
tt<-list_home_team_viz %>% inner_join(Team_home_viz)%>% inner_join (Team_home_viz_2) %>% inner_join (Team_home_viz_31)%>% inner_join (Team_home_viz_32)
View(tt)
View(tt)
Team_home_viz<-tt
#jointure avec team attributes
temp <- list_home_team_viz %>% inner_join(Team_Attributes,by= c("home_team_api_id"="team_api_id"))
# 905
Team_Attributes <- dbGetQuery( db,'select * from Team_Attributes' )
#jointure avec team attributes
temp <- list_home_team_viz %>% inner_join(Team_Attributes,by= c("home_team_api_id"="team_api_id"))
# 905
temp$annee<-substr(temp$date,1,4)
temp <-filter(temp,annee=="2015")
temp <- temp [, c("home_team_api_id",
"buildUpPlaySpeed",
"buildUpPlayDribbling",
"buildUpPlayPassing","buildUpPlayPositioning",
"chanceCreationPassing",
"chanceCreationCrossing",
"chanceCreationShooting",
"chanceCreationPositioning",
"defencePressure",
"defenceAggression",
"defenceTeamWidth",
"defenceDefenderLine")]
colnames(temp)
View(temp)
View(temp)
View(temp)
View(temp)
View(temp)
View(temp)
temp <- temp [ ,c("home_team_api_id",
"buildUpPlaySpeed",
"buildUpPlayDribbling",
"buildUpPlayPassing",
"buildUpPlayPositioning",
"chanceCreationPassing",
"chanceCreationCrossing",
"chanceCreationShooting",
"chanceCreationPositioning",
"defencePressure",
"defenceAggression",
"defenceTeamWidth",
"defenceDefenderLine")]
temp <- temp [ ,c("home_team_api_id",
"buildUpPlaySpeed",
"buildUpPlayDribbling",
"buildUpPlayPassing",
"chanceCreationPassing",
"chanceCreationCrossing",
"chanceCreationShooting",
"chanceCreationPositioning",
"defencePressure",
"defenceAggression",
"defenceTeamWidth",
"defenceDefenderLine")]
temp <- temp [ ,c("home_team_api_id",
"buildUpPlaySpeed",
"buildUpPlayDribbling",
"buildUpPlayPassing",
#"buildUpPlayPositioning",
"chanceCreationPassing",
"chanceCreationCrossing",
"chanceCreationShooting",
"chanceCreationPositioning",
"defencePressure",
"defenceAggression",
"defenceTeamWidth" #,
#"defenceDefenderLine"
)]
temp <- list_home_team_viz %>% inner_join(Team_Attributes,by= c("home_team_api_id"="team_api_id"))
temp$annee<-substr(temp$date,1,4)
temp <-filter(temp,annee=="2015")
View(temp)
View(temp)
temp <- temp [ ,c("home_team_api_id",
"buildUpPlaySpeed",
"buildUpPlayDribbling",
"buildUpPlayPassing",
#"buildUpPlayPositioning",
"chanceCreationPassing",
"chanceCreationCrossing",
"chanceCreationShooting",
"chanceCreationPositioning",
"defencePressure",
"defenceAggression",
"defenceTeamWidth" #,
#"defenceDefenderLine"
)]
temp <- temp [ ,c("home_team_api_id",
#"buildUpPlaySpeed",
"buildUpPlayDribbling",
"buildUpPlayPassing",
#"buildUpPlayPositioning",
"chanceCreationPassing",
"chanceCreationCrossing",
"chanceCreationShooting",
"chanceCreationPositioning",
"defencePressure",
"defenceAggression",
"defenceTeamWidth" #,
#"defenceDefenderLine"
)]
temp <- temp [ ,c(#"home_team_api_id",
"buildUpPlaySpeed",
"buildUpPlayDribbling",
"buildUpPlayPassing",
#"buildUpPlayPositioning",
"chanceCreationPassing",
"chanceCreationCrossing",
"chanceCreationShooting",
"chanceCreationPositioning",
"defencePressure",
"defenceAggression",
"defenceTeamWidth" #,
#"defenceDefenderLine"
)]
temp <- temp [ ,c("home_team_api_id",
"buildUpPlaySpeed",
"buildUpPlayDribbling",
"buildUpPlayPassing",
#"buildUpPlayPositioning",
"chanceCreationPassing",
"chanceCreationCrossing",
"chanceCreationShooting",
#"chanceCreationPositioning",
"defencePressure",
"defenceAggression",
"defenceTeamWidth" #,
#"defenceDefenderLine"
)]
t<-Team_home_viz %>% left_join (temp)
Team_home_viz<-t
t<-Team_home_viz %>% left_join (Team[,c(2,4)],by= c("home_team_api_id"="team_api_id"))
Team <- dbGetQuery( db,'select * from Team' )
View(t)
View(t)
t<-Team_home_viz %>% left_join (Team[,c(2,4)],by= c("home_team_api_id"="team_api_id"))
View(Team)
View(Team)
View(t)
View(t)
Team_home_viz<-t
save(Team_home_viz,file="data/Team_home_viz.RData")
View(Team_home_viz)
View(Team_home_viz)
list_away_team_viz<-as.data.frame(unique(Match_viz$away_team_api_id))
colnames(list_away_team_viz) <- "away_team_api_id"
nb_match_team_season<- Match %>% group_by(away_team_api_id,season) %>% count()
Team_away_viz<-cast(nb_match_team_season,away_team_api_id~season,fill=0)
colnames(Team_away_viz)[2:9]<-paste("nb_match", colnames(Team_away_viz[2:9]), sep = "_")
nb_match_team_season_2<- Match %>% group_by(away_team_api_id,season,goal_diff_class) %>% count()
Team_away_viz_2<-cast(nb_match_team_season_2,away_team_api_id~season+goal_diff_class,fill=0)
colnames(Team_away_viz_2)[2:26]<-paste("nb_match", colnames(Team_away_viz_2[2:26]), sep = "_")
## nb de buts marqués et encaissés
nb_match_team_season_3<- Match %>% group_by(away_team_api_id,season) %>% summarize(goal_scored=sum(away_team_goal), goal_conceded=sum(home_team_goal))
Team_away_viz_31<-cast(nb_match_team_season_3,away_team_api_id~season,value="goal_scored",fill=0)
colnames(Team_away_viz_31)[2:9]<-paste("nb_goal_scored", colnames(Team_away_viz_31[2:9]), sep = "_")
Team_away_viz_32<-cast(nb_match_team_season_3,away_team_api_id~season,value="goal_conceded",fill=0)
colnames(Team_away_viz_32)[2:9]<-paste("nb_goal_conceded", colnames(Team_away_viz_32[2:9]), sep = "_")
#jointures avec join de dplyr
tt<-list_away_team_viz %>% inner_join(Team_away_viz)%>% inner_join (Team_away_viz_2) %>% inner_join (Team_away_viz_31)%>% inner_join (Team_away_viz_32)
Team_away_viz<-tt
#jointure avec team attributes
temp <- list_away_team_viz %>% inner_join(Team_attributes,by= c("away_team_api_id"="team_api_id"))
temp$annee<-substr(temp$date,1,4)
temp <- list_away_team_viz %>% inner_join(Team_Attributes,by= c("away_team_api_id"="team_api_id"))
temp$annee<-substr(temp$date,1,4)
temp <-filter(temp,annee=="2015")
temp <- temp [, c("away_team_api_id",
"buildUpPlaySpeed",
"buildUpPlayDribbling",
"buildUpPlayPassing",
#"buildUpPlayPositioning",
"chanceCreationPassing",
"chanceCreationCrossing",
"chanceCreationShooting",
#"chanceCreationPositioning",
"defencePressure",
"defenceAggression",
"defenceTeamWidth" #,
#"defenceDefenderLine"
)]
#jointure
t<-Team_away_viz %>% left_join (temp)
Team_away_viz<-t
# nom de l'équipe
t<-Team_away_viz %>% left_join (Team[,c(2,4)],by= c("away_team_api_id"="team_api_id"))
Team_away_viz<-t
View(Team_away_viz)
View(Team_away_viz)
save(Team_away_viz,file="data/Team_away_viz.RData")
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
